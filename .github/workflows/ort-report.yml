name: Ort Report Action
on: [push]

jobs:
  ort_report_job:
    runs-on: ubuntu-latest
    name: Analyse with ORT

    steps:

      - name: Checkout
        uses: actions/checkout@v3
        with:
          path: main

      - name: Checkout scancode results repo
        uses: actions/checkout@v3
        with:
          repository: janderssonse/scancode-results
          path: scancode

      - name: Ort action analyse step
        id: ort-action
        uses: janderssonse/ort-action@18dac139b2add6f023e03085e60ea426c1a61d95
        with:
          ort_disable_scan: true
          ort_log_level: info
          ort_config_file: ort.conf
        
       
      - name: ort-action-artifacts
        uses: actions/upload-artifact@v2
        with:
            name: analysis
            path: ./main/reports
